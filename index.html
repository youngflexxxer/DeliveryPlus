<!DOCTYPE html>
<html lang="ru">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Delivery Orders</title>
	<link rel="stylesheet" href="style.css">
</head>
<body>
	<div class="container">
		<div class="header">
			<div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
				<h1>üì¶ DeliveryPlus (beta)</h1>
				<div class="order-counter">
					<span id="orderCounterText">0/0</span>
				</div>
			</div>

			<div class="controls">
				<div class="control-group">
					<label>–ú–∏–Ω. –æ–ø–ª–∞—Ç–∞ (‚ÇΩ)</label>
					<input type="number" id="minPayment" onchange="renderOrders()" value="1000" min="0">
				</div>
				<div class="control-group">
					<label>–î–∞—Ç–∞ –¥–æ—Å—Ç–∞–≤–∫–∏</label>
					<div style="display: flex; gap: 8px;">
						<input type="date" id="filterDate" onchange="renderOrders()" style="flex: 1;">
						<button onclick="clearDateFilter()" style="padding: 10px 12px; background: #f0f0f0; color: #333; border: 2px solid #e0e0e0; border-radius: 6px; cursor: pointer; font-weight: 600; flex: 0 0 45px;">‚úï</button>
					</div>
				</div>
				<div class="control-group">
					<label>–ú–∞–∫—Å. –≤–µ—Å (–∫–≥)</label>
					<input type="number" id="maxWeight" onchange="renderOrders()" value="250" min="0">
				</div>
				<div class="control-group">
					<label>–ú–∞–∫—Å. —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –¥–æ –ø–µ—Ä–≤–æ–π —Ç–æ—á–∫–∏ (–∫–º)</label>
					<input type="number" id="maxDistance" onchange="renderOrders()" value="" min="0" step="0.1" placeholder="–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π">
				</div>
				<div class="control-group">
					<label>–ú–∞–∫—Å. –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫</label>
					<input type="number" id="maxPoints" onchange="renderOrders()" value="4" min="1">
				</div>
				<div class="control-group">
					<label>–ú–∏–Ω. —Ü–µ–Ω–∞ –∑–∞ –∫–º (‚ÇΩ)</label>
					<input type="number" id="minPricePerKm" onchange="renderOrders()" value="0" min="0">
				</div>
				<div class="control-group">
					<label>–°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞</label>
					<div class="dropdown" id="sortDropdown">
						<button class="dropdown-button" onclick="toggleSortDropdown(event)">
							<span id="sortLabel">–ù–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞</span>
							<span class="dropdown-arrow">‚ñº</span>
						</button>
						<div class="dropdown-menu" id="sortDropdownMenu">
							<div class="sort-item" onclick="selectSort('newest', '–ù–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞')">
								–ù–æ–≤—ã–µ —Å–Ω–∞—á–∞–ª–∞
							</div>
							<div class="sort-item" onclick="selectSort('price-desc', '–î–æ—Ä–æ–∂–µ')">
								–î–æ—Ä–æ–∂–µ
							</div>
							<div class="sort-item" onclick="selectSort('distance-asc', '–ë–ª–∏–∂–µ')">
								–ë–ª–∏–∂–µ
							</div>
							<div class="sort-item" onclick="selectSort('price-per-km-desc', '–í—ã–≥–æ–¥–Ω–µ–π')">
								–í—ã–≥–æ–¥–Ω–µ–π
							</div>
						</div>
					</div>
				</div>
				<div class="control-group">
					<label>–¢–∏–ø —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–∞</label>
					<div class="dropdown" id="vehicleDropdown">
						<button class="dropdown-button" onclick="toggleDropdown(event)">
							<span id="vehicleLabel">–í—Å–µ —Ç–∏–ø—ã</span>
							<span class="dropdown-arrow">‚ñº</span>
						</button>
						<div class="dropdown-menu" id="dropdownMenu">
							<div class="checkbox-item" onclick="toggleCheckbox(this)">
								<input type="checkbox" class="vehicle-checkbox" value="1" checked>
								<label class="checkbox-label">
									<span>–¥–∂–∏–ø/–ø–∏–∫–∞–ø</span>
								</label>
							</div>
							<div class="checkbox-item" onclick="toggleCheckbox(this)">
								<input type="checkbox" class="vehicle-checkbox" value="2" checked>
								<label class="checkbox-label">
									<span>–∫–∞–±–ª—É–∫</span>
								</label>
							</div>
							<div class="checkbox-item" onclick="toggleCheckbox(this)">
								<input type="checkbox" class="vehicle-checkbox" value="3">
								<label class="checkbox-label">
									<span>–ø–æ—Ä—Ç–µ—Ä</span>
								</label>
							</div>
							<div class="checkbox-item" onclick="toggleCheckbox(this)">
								<input type="checkbox" class="vehicle-checkbox" value="4">
								<label class="checkbox-label">
									<span>–≥–∞–∑–µ–ª—å</span>
								</label>
							</div>
							<div class="checkbox-item" onclick="toggleCheckbox(this)">
								<input type="checkbox" class="vehicle-checkbox" value="5">
								<label class="checkbox-label">
									<span>–≥—Ä—É–∑–æ–≤–æ–π</span>
								</label>
							</div>
							<div class="checkbox-item" onclick="toggleCheckbox(this)">
								<input type="checkbox" class="vehicle-checkbox" value="7" checked>
								<label class="checkbox-label">
									<span>–∞–≤—Ç–æ</span>
								</label>
							</div>
						</div>
					</div>
				</div>
				<div class="control-group">
					<div style="display: flex; align-items: center; gap: 8px;">
						<input type="checkbox" id="soundEnabled" style="width: 20px; height: 20px;">
						<span class="checkbox-text">üîä –ó–≤—É–∫–æ–≤–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ</span>
					</div>
				</div>

				<div class="btn-group">
					<button class="btn-primary" onclick="openApiModal()" title="API settings and configuration">
						‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏
					</button>
					<button class="btn-primary" id="autoRefreshBtn" onclick="toggleAutoRefresh()" title="Start auto-refresh from API">
						‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç
					</button>
				</div>
			</div>
		</div>

		<div class="orders" id="orders">
			<div class="empty-state">
				<div class="empty-state-icon">üì≠</div>
				<h2>No orders loaded</h2>
				<p>Load a JSON file or paste data to get started</p>
			</div>
		</div>
	</div>

	<!-- Settings Modal -->
	<div id="apiModal" class="modal">
		<div class="modal-content">
			<div class="modal-header">
				<h2>–ù–∞—Å—Ç—Ä–æ–π–∫–∏</h2>
				<button class="close" onclick="closeApiModal()">&times;</button>
			</div>
			<div class="api-form">
				<div class="form-row">
					<div class="control-group">
						<label>–¢–æ–∫–µ–Ω</label>
						<input type="text" id="sessionToken">
					</div>
					<div class="control-group">
						<label>User Agent</label>
						<input type="text" id="userAgent" placeholder="ru-courier-app-main-android/2.115.0.3158" value="ru-courier-app-main-android/2.115.0.3158">
					</div>
				</div>

			<div class="form-row">
				<div class="control-group">
					<label>–ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (—Å–µ–∫)</label>
					<input type="number" id="settingsAutoRefreshInterval" value="60" min="5" step="1">
				</div>
				<div class="control-group">
					<div style="display: flex; align-items: center; gap: 8px;">
						<input type="checkbox" id="showTakenOrders" style="width: 20px; height: 20px;" checked>
						<span class="checkbox-text">–ü–æ–∫–∞–∑–∞—Ç—å –≤–∑—è—Ç—ã–µ –∑–∞–∫–∞–∑—ã</span>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Loader -->
	<div id="loader" class="loader">
		<div class="spinner"></div>
	</div>

	<script src="script.js"></script>
</body>
</html>
